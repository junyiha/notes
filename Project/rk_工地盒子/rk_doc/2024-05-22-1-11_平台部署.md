---
category: Project
date: 2024-05-22 09:00:00 +0800
layout: post
title: 1-11_平台部署
tag: ProjectOfRK
---
## 简介

+ rk1126平台部署
  + 发货的时候，网关 192.169.4.1 要删除

## 最初无锡两个盒子

+ 192.169.5.57
+ 192.169.5.58 
+ 2023.10.07 日收到

## 串口调试

+ windows下 modaXterm 工具 波特率为 1500000

## 动态ip申请

+ 使用 1000M 网口作为静态IP，电脑通过网线 直连 到盒子，设置同一网段，内部登陆盒子界面
  + 192.168.1.150  厂家静态IP 
  + 192.169.5.56   公司内部测试IP 

+ 使用 100M 网口作为动态IP ，在客户现场，盒子通过网线 连接到 路由器上，动态申请IP，后续所有访问基于这个IP 

## docker ping 工具

+ 下载ping命令
```bash 
apt install iputils-ping
```

## 盒子无法访问平台网址

+ 方法一
  + 修改 /etc/network/interfaces 中的静态别名ip，把 gateway 一行注释掉 

+ 方法二
  + 使用 route 设置默认路由

## docker命令

+ 启动容器命令
```bash 
docker run -d --privileged=true --restart=always --network=host -v /userdata/:/userdata/ -v /dev/galcore:/dev/galcore -v /usr/:/rk_usr/ --device=/dev/galcore  rk1126:20231026 /bin/bash /data/static/bash/auto-run.sh
```

+ 打包命令
```bash
tar -cvf rk_image.tar --exclude=/sys --exclude=/system --exclude=/proc --exclude=rk_image.tar --exclude=/userdata --exclude=/dev/media0 --exclude=/dev/galcore --exclude=/rk_usr --exclude=/tmp/* --exclude=/root  /
```

## 清除数据

+ 清除相机记录
+ 清除任务记录
+ 清除告警记录，通过mnc-cmd.sh --warning-clear
+ 清除告警图片 rm /data/static/warning_record/*.jpg
+ 清除系统配置的推送地址

## vca 编译命令

+ `./configure.sh -c ROCKCHIP -p arm -m rk1126 -g`

## 配置IP

+ 配置文件 /etc/network/interfaces
```bash
# interface file auto-generated by buildroot

auto lo
iface lo inet loopback

auto eth0:1
iface eth0:1 inet static
  address 192.169.5.55
  netmask 255.255.0.0
  gateway 192.169.4.1
```