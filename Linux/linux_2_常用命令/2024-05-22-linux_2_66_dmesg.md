---
category: Linux
date: 2024-05-22 09:00:00 +0800
layout: post
title: linux_2_66_dmesg
tag: Linux
---
## 简介

+ dmesg命令

## linux dmesg命令 详解

`dmesg` 命令用于显示 Linux 内核环缓冲区的信息，其中包含了内核启动和运行过程中的消息。这些消息通常包括硬件、驱动程序、系统错误等的信息。下面是 `dmesg` 命令的一些常用选项和用法：

### 基本用法：

1. **查看所有的内核消息：**
   ```bash
   dmesg
   ```
   这会显示内核环缓冲区中的所有消息，包括启动信息、硬件检测、驱动程序加载等。

2. **只显示最新的几条消息：**
   ```bash
   dmesg | tail
   ```
   使用 `tail` 命令可以只显示最新的几条消息，以便查看最近的系统活动。

3. **实时监视内核消息：**
   ```bash
   dmesg -w
   ```
   使用 `-w` 选项可以实时监视内核消息，新的消息会实时显示在终端上。

### 选项和过滤：

4. **过滤包含特定关键字的消息：**
   ```bash
   dmesg | grep "keyword"
   ```
   使用 `grep` 命令可以过滤只显示包含特定关键字的消息，方便查找特定信息。

5. **显示特定设备的消息：**
   ```bash
   dmesg | grep "sda"
   ```
   可以使用 `grep` 过滤显示与特定设备相关的消息，例如硬盘 `sda`。

6. **显示特定级别的消息：**
   ```bash
   dmesg -l err
   ```
   使用 `-l` 选项可以指定消息的级别，例如 `err` 表示只显示错误级别的消息。可选的级别包括 `emerg`, `alert`, `crit`, `err`, `warn`, `notice`, `info`, 和 `debug`。

7. **显示时间戳：**
   ```bash
   dmesg -T
   ```
   使用 `-T` 选项可以显示人类可读的时间戳，而不是默认的秒数。

### 更多选项：

8. **清除内核环缓冲区：**
   ```bash
   dmesg -c
   ```
   使用 `-c` 选项可以清除内核环缓冲区，将其重置为空。

9. **将内核消息保存到文件：**
   ```bash
   dmesg > dmesg.log
   ```
   将内核消息保存到文件中，以便后续查看或分析。

10. **查看内核消息的缓冲区大小：**
    ```bash
    dmesg -s
    ```
    使用 `-s` 选项可以查看当前内核消息缓冲区的大小。

`dmesg` 命令对于诊断系统问题、查看硬件信息以及了解系统启动和运行过程中的事件非常有用。根据具体的需求和问题，选择适当的选项和过滤方式，可以更方便地获取所需的信息。

## dmesg

`dmesg`是一个Linux命令，用于显示内核环缓冲区的内容。它可以提供有关系统启动期间发生的事件、硬件故障、驱动程序加载和其他内核消息的详细信息。

以下是`dmesg`命令的常用选项和用法：

```bash
dmesg [options]
```

常用选项：

- `-c, --clear`：清除内核环缓冲区的内容。
- `-s, --buffer-size=size`：设置内核环缓冲区的大小。
- `-n, --console-level=level`：设置在控制台上显示的内核消息的级别。
- `-r, --raw`：以原始格式显示内核消息，不进行解析。
- `-T, --ctime`：以人类可读的日期和时间格式显示内核消息的时间戳。
- `--color[=when]`：设置输出中的颜色。
- `-h, --help`：显示帮助信息。

示例用法：

1. 显示内核环缓冲区的内容：

```bash
dmesg
```

上述命令将显示内核环缓冲区中的所有消息。

2. 清除内核环缓冲区的内容：

```bash
dmesg -c
```

上述命令将清除内核环缓冲区的内容。

3. 以人类可读的日期和时间格式显示内核消息：

```bash
dmesg -T
```

上述命令将以人类可读的日期和时间格式显示内核消息的时间戳。

4. 设置内核消息的显示级别：

```bash
dmesg -n 4
```

上述命令将仅显示级别为4（警告级别）及以上的内核消息。

`dmesg`命令还支持其他选项和用法，您可以通过`man dmesg`命令查看完整的帮助文档和更多示例。