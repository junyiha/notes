---
category: Linux
date: 2024-05-22 09:00:00 +0800
layout: post
title: linux_2_69_top
tag: Linux
---
## 简介

+ top命令

## linux top命令 详解

`top` 命令是一个用于实时查看系统资源使用情况的工具。它提供了一个交互式的实时界面，用于监控系统的进程、CPU利用率、内存使用情况等。以下是一些常用的 `top` 命令选项和用法：

### 1. **基本用法：**
```bash
top
```
运行 `top` 命令后，会显示实时的系统状态信息，包括进程列表、CPU利用率、内存使用情况等。

### 2. **以特定的时间间隔刷新界面：**
```bash
top -d interval
```
使用 `-d` 选项可以指定刷新界面的时间间隔，单位为秒。例如，`top -d 5` 表示每隔5秒刷新一次。

### 3. **按照 CPU 利用率排序：**
```bash
top -o %CPU
```
使用 `-o` 选项可以指定按照某个字段排序，例如 `%CPU` 表示按照 CPU 利用率排序。

### 4. **显示特定用户的进程：**
```bash
top -u username
```
使用 `-u` 选项可以指定只显示特定用户的进程，将 `username` 替换为相应的用户名。

### 5. **显示特定进程的信息：**
```bash
top -p pid
```
使用 `-p` 选项可以指定只显示特定进程的信息，将 `pid` 替换为相应的进程ID。

### 6. **显示完整的命令行信息：**
```bash
top -c
```
使用 `-c` 选项可以显示完整的命令行信息，包括命令行的参数。

### 7. **显示累积模式：**
```bash
top -E
```
使用 `-E` 选项可以开启累积模式，显示所有进程的累积信息。

### 8. **显示关于内存的信息：**
```bash
top -o %MEM
```
使用 `-o` 选项可以按照内存占用情况排序，例如 `%MEM` 表示按照内存占用率排序。

### 9. **显示关于磁盘的信息：**
```bash
top -O res
```
使用 `-O` 选项可以显示关于磁盘 I/O 情况的信息。

### 10. **显示关于网络的信息：**
```bash
top -N
```
使用 `-N` 选项可以显示关于网络的信息。

### 11. **查看帮助信息：**
```bash
top -h
```
使用 `-h` 选项可以查看 `top` 命令的帮助信息，包括所有可用选项的说明。

### 12. **退出 `top`：**
按下 `q` 键可以退出 `top`。

在 `top` 的交互式界面中，你可以使用不同的键来执行各种操作，例如按 `k` 键杀死进程，按 `r` 键重新调度进程等。

`top` 命令是一个非常强大的系统监控工具，通过实时交互界面提供了对系统性能的全面监控。根据不同的需求，你可以选择不同的选项来查看和分析系统资源使用情况。

## linux top命令 常用技巧

以下是在使用 `top` 命令时的一些常用技巧和快捷键，以更灵活地查看和管理系统资源的使用情况：

### 1. **切换排序方式：**
- 按 `P` 键：按照 CPU 利用率排序。
- 按 `M` 键：按照内存占用率排序。
- 按 `T` 键：按照运行时间排序。

### 2. **切换显示模式：**
- 按 `A` 键：切换显示所有用户的进程或只显示当前用户的进程。
- 按 `U` 键：输入用户名，只显示该用户的进程。

### 3. **显示特定进程：**
- 按 `pid` 键：输入进程ID，只显示特定进程的信息。

### 4. **切换显示字段：**
- 按 `f` 键：进入字段管理界面，可以选择显示/隐藏不同的字段。

### 5. **切换累积/非累积模式：**
- 按 `e` 键：切换累积/非累积模式，显示所有或仅显示当前瞬时数据。

### 6. **设置刷新间隔：**
- 按 `s` 键：输入新的刷新间隔时间，单位为秒。

### 7. **查看帮助信息：**
- 按 `h` 键：显示 `top` 命令的帮助信息。

### 8. **结束进程：**
- 按 `k` 键：输入进程ID，可以杀死指定的进程。

### 9. **切换至安全模式：**
- 按 `H` 键：切换至安全模式，只显示用户界面上可见的进程。

### 10. **切换至树状显示：**
- 按 `V` 键：切换至树状显示，显示进程之间的父子关系。

### 11. **切换至紧凑模式：**
- 按 `c` 键：切换至紧凑模式，只显示进程的命令行。

### 12. **切换至逆序排序：**
- 按 `<` 键：切换至逆序排序。

### 13. **调整显示范围：**
- 使用方向键：可以在进程列表和统计信息之间切换。
- 使用 `Page Up` 和 `Page Down` 键：滚动显示。

这些快捷键和技巧使得在 `top` 命令的交互式界面中更加方便地查看和管理系统资源的使用情况。通过这些操作，你可以根据需要快速切换显示方式、排序方式，以及进行进程管理。

## top

+ 简介：
  + top, 以全屏交互式的界面显示进程排名,及时跟踪包括CPU,内存等系统资源占用情况,默认情况下每三秒刷新一次,其作用基本类似于Windows系统中的任务管理器
  + top命令，是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，常用于服务端性能分析。
  + top命令，可以实时动态地查看系统的整体运行情况，是一个综合了多方信息监测系统性能和运行信息的实用工具。通过top命令所提供的互动式界面，用热键可以管理。
  + 在top命令中按f按可以查看显示的列信息，按对应字母来开启/关闭列，大写字母表示开启，小写字母表示关闭。带*号的是默认列。

+ 语法
  + top(选项)

+ 选项
  + -b：以批处理模式操作；
  + -c：显示完整的治命令；
  + -d：屏幕刷新间隔时间；
  + -I：忽略失效过程；
  + -s：保密模式；
  + -S：累积模式；
  + -i<时间>：设置间隔时间；
  + -u<用户名>：指定用户名；
  + -p<进程号>：指定进程；
  + -n<次数>：循环显示的次数。

+ top交互命令：在top命令执行过程中可以使用的一些交互命令。这些命令都是单字母的，如果在命令行中使用了-s选项， 其中一些命令可能会被屏蔽。
  + h：显示帮助画面，给出一些简短的命令总结说明；
  + k：终止一个进程；
  + i：忽略闲置和僵死进程，这是一个开关式命令；
  + q：退出程序；
  + r：重新安排一个进程的优先级别；
  + S：切换到累计模式；
  + s：改变两次刷新之间的延迟时间（单位为s），如果有小数，就换算成ms。输入0值则系统将不断刷新，默认值是5s；
  + f或者F：从当前显示中添加或者删除项目；
  + o或者O：改变显示项目的顺序；
  + l：切换显示平均负载和启动时间信息；
  + m：切换显示内存信息；
  + t：切换显示进程和CPU状态信息；
  + c：切换显示命令名称和完整命令行；
  + M：根据驻留内存大小进行排序；
  + P：根据CPU使用百分比大小进行排序；
  + T：根据时间/累计时间进行排序；
  + w：将当前设置写入~/.toprc文件中。

+ 实例
  ```
    top - 09:44:56 up 16 days, 21:23,  1 user,  load average: 9.59, 4.75, 1.92
    Tasks: 145 total,   2 running, 143 sleeping,   0 stopped,   0 zombie
    Cpu(s): 99.8%us,  0.1%sy,  0.0%ni,  0.2%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
    Mem:   4147888k total,  2493092k used,  1654796k free,   158188k buffers
    Swap:  5144568k total,       56k used,  5144512k free,  2013180k cache
  ``` 
+ 解释
  + top - 09:44:56[当前系统时间],
  + 16 days[系统已经运行了16天],
  + 1 user[个用户当前登录],
  + load average: 9.59, 4.75, 1.92[系统负载，即任务队列的平均长度]
  + Tasks: 145 total[总进程数],
  + 2 running[正在运行的进程数],
  + 143 sleeping[睡眠的进程数],
  + 0 stopped[停止的进程数],
  + 0 zombie[冻结进程数],
  + Cpu(s): 99.8%us[用户空间占用CPU百分比],
  + 0.1%sy[内核空间占用CPU百分比],
  + 0.0%ni[用户进程空间内改变过优先级的进程占用CPU百分比],
  + 0.2%id[空闲CPU百分比], 0.0%wa[等待输入输出的CPU时间百分比],
  + 0.0%hi[],
  + 0.0%st[],
  + Mem: 4147888k total[物理内存总量],
  + 2493092k used[使用的物理内存总量],
  + 1654796k free[空闲内存总量],
  + 158188k buffers[用作内核缓存的内存量]
  + Swap:  5144568k total[交换区总量],
  + 56k used[使用的交换区总量],
  + 5144512k free[空闲交换区总量],
  + 2013180k cached[缓冲的交换区总量],

+ 字段解释:
  + `Tasks` : 系统任务信息
  + `total` : 总进程数
  + `running` : 正在运行的进程数
  + `sleeping` : 休眠的进程数
  + `stopped`  : 终止的进程数
  + `zombie`  : 僵死无响应的进程数

+ 常用命令
  + `top ` 回车之后再输入c，会显示进程详细信息
  + `top -p pid`， 查看指定进程ID的动态资源

+ 在 top 命令中，你可以使用以下快捷键来修改显示的单位：
  - 按下 "e" 键：切换内存显示单位，可以在字节（Bytes）、千字节（KBytes）、兆字节（MBytes）和吉字节（GBytes）之间进行切换。
  - 按下 "E" 键：切换内存和交换空间显示单位，与 "e" 键类似，但同时会修改交换空间的显示单位。
  - 按下 "k" 键：切换 CPU 使用率的显示单位，可以在百分比（%）、千分比（m%）和百万分比（M%）之间进行切换。
  - 按下 "K" 键：切换 CPU 时间的显示单位，可以在秒（s）、毫秒（ms）和微秒（us）之间进行切换。
+ 在 top 命令中按下相应的键后，单位会相应地进行切换，并且在顶部的标题行中会显示当前的单位。你可以根据需要选择合适的单位来查看系统资源的使用情况。