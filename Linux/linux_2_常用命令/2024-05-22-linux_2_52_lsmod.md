---
category: Linux
date: 2024-05-22 09:00:00 +0800
layout: post
title: linux_2_52_lsmod
tag: LinuxCommand
---
## 简介

+ lsmod命令

## linux lsmod命令 详解

`lsmod` 命令用于列出当前加载在 Linux 内核中的模块（也称为内核模块或驱动程序）。以下是关于 `lsmod` 命令的详细说明：

### 基本用法：

```bash
lsmod
```

### 参数说明：

- **无参数：** 默认情况下，`lsmod` 将列出所有已加载的内核模块及其相关信息。

### 输出信息的列说明：

1. **Module：** 内核模块的名称。
2. **Size：** 内核模块占用的内存大小（以字节为单位）。
3. **Used by：** 使用该模块的其他模块或进程的计数。
4. **References：** 内核模块的引用计数，表示有多少个内核对象正在使用该模块。

### 示例：

```bash
$ lsmod
Module                  Size  Used by
nls_utf8               16384  1
isofs                  49152  1
udf                    98304  0
crc_itu_t              16384  1 udf
...
```

### 详细解释：

- **Module：** 列出已加载模块的名称。
- **Size：** 显示每个模块占用内存的大小。
- **Used by：** 显示使用该模块的其他模块或进程的计数。
- **References：** 显示模块的引用计数，表示有多少个内核对象正在使用该模块。

### 常用选项：

- **-h, --help：** 显示帮助信息。
- **-V, --version：** 显示命令版本信息。

### 使用示例：

1. **显示模块详细信息：**
   ```bash
   lsmod | grep <module_name>
   ```
   使用 `grep` 过滤特定模块的详细信息。

2. **按模块大小排序：**
   ```bash
   lsmod | sort -k2 -n
   ```
   使用 `sort` 命令按模块大小排序。

3. **只显示已使用的模块：**
   ```bash
   lsmod | grep -v "^$" | tail -n +2
   ```
   使用 `grep` 和 `tail` 过滤并排除无效行，只显示已使用的模块。

`lsmod` 命令对于了解系统当前加载的内核模块非常有用，可以在排查硬件或软件问题时提供有关系统状态的重要信息。

## lsmod 

`lsmod` 是 Linux 系统上的一个命令行工具，用于列出当前加载的内核模块（驱动程序）。它可以显示系统中已加载的内核模块及其关联的信息。下面是对 `lsmod` 命令的详细解释：

1. `lsmod`：直接运行 `lsmod` 命令将列出当前加载的所有内核模块。

2. `lsmod | less`：通过管道将 `lsmod` 的输出传递给 `less` 命令，以便在一页一页地浏览模块列表。

3. `lsmod | grep <pattern>`：使用 `grep` 命令可以在模块列表中搜索特定模块或模块名称的模式匹配。例如，`lsmod | grep snd` 将显示与 "snd" 相关的内核模块。

4. `lsmod -t`：使用 `-t` 选项可以按模块的使用计数对模块进行排序，并将最常使用的模块显示在前面。

5. `lsmod -r`：使用 `-r` 选项可以反向排序模块列表，以显示使用计数最低的模块。

6. `lsmod -v`：使用 `-v` 选项可以显示更详细的模块信息，包括模块的大小、依赖关系和状态等。

7. `lsmod -h` 或 `lsmod --help`：显示 `lsmod` 命令的帮助信息，包括可用选项和用法示例。

通过 `lsmod` 命令，你可以获取有关当前加载的内核模块的信息。这对于了解系统上使用的驱动程序、模块之间的依赖关系以及进行故障排除和性能优化等操作非常有用。请注意，你可能需要以超级用户权限（root 或使用 `sudo` 命令）运行 `lsmod` 命令，以便查看完整的模块列表。