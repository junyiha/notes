## 简介

+ linux系统下常用技巧

## linux ssh自动化管理

在 Linux 中自动化 SSH 管理可以通过多种方式实现，其中一些包括使用 SSH 密钥对、SSH 配置文件、SSH 代理、以及脚本化工具等。

### 使用 SSH 密钥对
1. **生成 SSH 密钥对**：
   ```bash
   ssh-keygen -t rsa -b 4096
   ```
2. **将公钥添加到远程服务器**：
   ```bash
   ssh-copy-id user@remote_host
   ```
3. **配置 SSH 代理**：
   可以使用 `ssh-agent` 和 `ssh-add` 命令管理 SSH 密钥，避免在每次连接时都输入密码。

### 使用 SSH 配置文件
SSH 配置文件位于 `~/.ssh/config`，可以配置各种连接选项。示例：

```bash
Host alias_name
    HostName remote_host
    User username
    Port port_number
    IdentityFile /path/to/private_key
```

### 使用脚本自动化连接
可以编写脚本来自动化 SSH 连接和命令执行，例如使用 Bash 或 Python 脚本。这些脚本可以使用 SSH 密钥对进行身份验证，并在需要时执行特定的命令或操作。

### 使用自动化工具
有一些专门用于自动化远程连接和管理的工具，例如 Ansible、Fabric 或 Paramiko（Python SSH 库）。这些工具提供了更高级的功能，允许您批量执行命令、配置管理和远程任务等。

### 一些示例
- **使用 SSH 配置文件简化连接**：
  在 `~/.ssh/config` 中定义主机别名和连接参数，使得通过简单别名即可连接。

- **使用脚本批量执行命令**：
  编写 Bash 或 Python 脚本，使用 SSH 连接并在多台服务器上执行特定命令。

- **使用自动化工具进行配置管理**：
  使用 Ansible 等自动化工具，可以定义剧本 (playbooks)，批量管理多台远程主机的配置和操作。

以上方法可根据需求和环境适用。安全性、灵活性和易用性都是自动化管理中需要考虑的关键因素。

## 使用 SSH 密钥对来进行身份验证。

使用 SSH 密钥对进行身份验证是一种更安全和推荐的方式，相比于使用密码，它提供了更强的安全性。以下是使用 SSH 密钥对进行身份验证的基本步骤：

1. **生成 SSH 密钥对：**
   在本地计算机上生成 SSH 密钥对，包括私钥和公钥。可以使用以下命令生成 SSH 密钥对：

   ```bash
   ssh-keygen -t rsa -b 4096
   ```

   上述命令将生成一个 4096 位的 RSA 密钥对。在执行该命令后，系统会询问您要存储密钥的位置以及是否要设置密码来保护私钥。根据需要进行设置。

2. **将公钥添加到远程服务器：**
   将生成的公钥（通常是 `~/.ssh/id_rsa.pub`）内容复制到远程服务器的 `~/.ssh/authorized_keys` 文件中。可以使用以下命令将公钥复制到远程服务器：

   ```bash
   ssh-copy-id user@remote_host
   ```

   这将会提示您输入远程主机的密码，然后将本地计算机上的公钥添加到远程主机的 `authorized_keys` 文件中。

3. **验证 SSH 密钥是否工作：**
   使用 SSH 连接到远程服务器，如果一切设置正确，连接时将不再需要输入密码：

   ```bash
   ssh user@remote_host
   ```

   确保您可以无需输入密码直接登录到远程服务器，这意味着 SSH 密钥对身份验证已经成功。

通过使用 SSH 密钥对，您可以更安全地进行远程连接，同时可以通过密码保护私钥来增加额外的安全性。此外，记住定期更新 SSH 密钥对以及谨慎管理和保护您的私钥非常重要。

## ubuntu apt 查看安装包的库文件和头文件

要查看已安装软件包中的库文件和头文件，您可以使用 `dpkg -L` 命令来查找特定软件包已安装的文件列表。以下是在 Ubuntu 上使用 `dpkg -L` 来查找已安装软件包中的库文件和头文件的示例：

### 查看已安装软件包的库文件

```bash
dpkg -L libssl-dev
```

这将显示 `libssl-dev` 软件包安装的文件列表，其中应包括 OpenSSL 库文件。

### 查看已安装软件包的头文件

```bash
dpkg -L libssl-dev | grep /usr/include/
```

这将筛选出 `libssl-dev` 软件包中安装的头文件路径。通常，C/C++ 的头文件位于 `/usr/include/` 目录下。

您可以将 `libssl-dev` 替换为您想要检查的其他软件包名称，以查找特定软件包已安装的文件列表。这种方法可以帮助您查找软件包中包含的特定文件，以便在编译和开发过程中正确地包含和链接所需的文件。

## ubuntu 系统全部快捷键 详解

Ubuntu系统的全部快捷键在不同版本和桌面环境下可能会有所不同。下面是一些Ubuntu系统常见的全局快捷键及其详细说明，主要针对Ubuntu 20.04及更早版本以及默认的GNOME桌面环境：

1. **通用快捷键**：

   - `Ctrl + Alt + Delete`：打开系统监视器，允许你终止或重新启动系统。
   - `Ctrl + Alt + T`：打开终端。
   - `Super`键（通常是Windows键）：打开应用程序菜单或Dash（Ubuntu的应用启动器）。
   - `Super + D`：最小化或还原所有窗口，显示桌面。
   - `Alt + F2`：打开运行命令对话框。

2. **窗口管理快捷键**：

   - `Alt + Tab`：切换活动应用程序。
   - `Alt + `（`~`键上方的键）：在当前应用程序的窗口之间切换。
   - `Super + 数字键`：打开或切换到任务栏上的相应应用程序。
   - `Super + W`：显示所有打开窗口，允许你选择要切换到的窗口。
   - `Super + Arrow键`：将窗口最大化、最小化或分割到屏幕的一侧。
   - `Alt + F4`：关闭当前窗口。

3. **文本编辑和终端快捷键**：

   - `Ctrl + C`：中断当前进程。
   - `Ctrl + Z`：将当前进程移到后台。
   - `Ctrl + A`：将光标移到行首。
   - `Ctrl + E`：将光标移到行尾。
   - `Ctrl + U`：删除从光标位置到行首的文本。
   - `Ctrl + K`：删除从光标位置到行尾的文本。
   - `Ctrl + L`：清除终端屏幕。

4. **文件管理器快捷键**：

   - `Ctrl + N`：打开新窗口。
   - `F2`：重命名文件或文件夹。
   - `Ctrl + H`：显示或隐藏隐藏文件和文件夹。
   - `Ctrl + L`：将焦点切换到地址栏。
   - `Ctrl + A`：全选文件或文件夹。

5. **工作区和多任务处理**：

   - `Ctrl + Alt + 左/右箭头`：切换工作区。
   - `Super + S`：显示所有工作区和打开窗口，允许你移动窗口到不同的工作区。

请注意，不同的桌面环境（如GNOME、KDE、Xfce等）可能会有不同的快捷键配置。此外，你还可以自定义快捷键，具体取决于你使用的桌面环境和个人偏好。要查看更多系统和桌面环境特定的快捷键，可以查阅相关文档或设置界面。

## linux 查看连接到本机的ssh客户端有哪些

要查看连接到Linux服务器的SSH客户端，你可以使用以下命令：

```bash
netstat -tnpa | grep 'ESTABLISHED.*ssh'
```

这个命令会显示当前所有建立的SSH连接。其中：

- `netstat` 是一个网络工具，用于显示各种网络相关信息。
- `-tnpa` 选项用于显示TCP连接的信息。
- `grep 'ESTABLISHED.*ssh'` 用于过滤并仅显示已建立的SSH连接。

这将列出所有已建立的 SSH 连接以及它们的相关详细信息，包括远程 IP 地址、本地端口、远程端口等。

## linux 使用命令发送tcp请求

在 Linux 中，你可以使用 `telnet` 或 `nc` 命令来发送 TCP 请求。这两个命令都可以用于测试 TCP 连接或发送数据到远程服务器。

### 使用 telnet 命令：

```bash
telnet <服务器地址> <端口号>
```

示例：

```bash
telnet 127.0.0.1 80
```

这将尝试连接到本地主机的 `80` 端口。连接成功后，你可以手动输入 HTTP 请求或其他内容。退出 telnet 会话可以通过输入 `Ctrl+]`，然后输入 `quit` 来完成。

### 使用 nc 命令：

`nc` 命令（也称为 netcat）是一个强大的网络工具，可以用于创建任何类型的连接，包括 TCP 和 UDP 连接。

```bash
nc <服务器地址> <端口号>
```

示例：

```bash
nc 127.0.0.1 80
```

连接建立后，你可以手动输入要发送的数据。退出 nc 会话可以通过输入 `Ctrl+C` 来中断连接。

这两个命令都是非常基本和通用的，用于测试 TCP 连接和发送数据。然而，它们并不提供像 HTTP 请求这样的高级协议功能，仅用于简单的连接和数据交换。

## C++ 如何查看可执行文件是否含有调试信息

要检查 C++ 可执行文件是否包含调试信息，可以使用一些工具来查看可执行文件的元数据。在 Linux 环境下，您可以使用 `readelf` 和 `objdump` 这样的工具。在 Windows 平台上，您可以使用 `dumpbin` 工具。

### Linux 上使用 readelf 和 objdump

1. **readelf**：它是一个用于显示 ELF（Executable and Linkable Format）文件信息的工具。要查看可执行文件的调试信息，可以使用以下命令：

    ```bash
    readelf -S your_executable_file
    ```

    这会显示文件中各个节（sections）的信息，您可以检查是否有 `.debug` 或 `.debug_*` 这样的节存在。这些节通常存储调试信息。

2. **objdump**：这是另一个用于查看可执行文件信息的工具，可以使用以下命令：

    ```bash
    objdump -h your_executable_file
    ```

    这将列出文件的各个节的信息，您可以检查是否存在与调试信息相关的节。

### Windows 上使用 dumpbin

在 Windows 上，您可以使用 Visual Studio 提供的 `dumpbin` 工具来查看可执行文件的信息，包括是否存在调试信息。

```bash
dumpbin /headers your_executable_file
```

这将显示可执行文件的头部信息，您可以在其中寻找与调试信息相关的部分。

请注意，调试信息在发布版本的可执行文件中通常被剥离以减少文件大小。在生产环境中，通常不会包含调试信息。

## 如何校准Linux服务器时间

+ Linux查看服务器当前事件
  + 查看当前时区: date -R
  + 查看当前日期和时间: date

+ 校准Linux服务器时间
  + Linux中有个ntp包可以自动校准时间,安装后可以很方便地校准事件
  + 安装前可以通过 cat /proc/version 命令查看当前操作系统版本信息
  + Debian系统安装NTP
    + apt-get install ntpdate
  + CentOS系统安装NTP:
    + yun install ntp

+ 校准时间命令
  + ntpdate cn.pool.ntp.org
  + 其中,cn.pool.ntp.org是ntp网络授时组织的中国授时源
  + 执行校准命令后,会自动调整时间并显示校正的时间偏移量

+ 使用命令 hwclock -w 保存配置,以便重启后时间再次不对

## du + sort + head

+ du -a ./ | sort -nr 
  + 按照文件从大到小排序(包含隐藏文件,包含目录,文件,层级目录下文件)

+ du -m --max-depth=1 ./ | sort -nr | head -n 10 
  + 指定目录第一层,显示前top10
  + -m : 统计单位为MB

+ du -m --max-depth=1 ./ | sort -nr -o 'sort.txt' | head -n 10 
  + 使用sort -o 参数将排序结果存入指定文件 sort.txt 中